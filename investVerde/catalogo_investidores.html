
<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Potenciais Investidores</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
  <link href="css/estilo.css" rel="stylesheet" />
  <style>
  body { background-color: #ecf0f1; }
  .btn-custom { background-color: #00745C; color: white; font-weight: bold; }
  .btn-custom:hover { background-color: #005c4a; }
  .icone-menu { width: 24px; height: 24px; }
  .menu { border-top: 1px solid #ccc; padding-top: 10px; margin-top: 20px; background-color: #f8f8f8; }
  .card-item { margin-bottom: 20px; }
  .card-img-top { max-height: 250px; object-fit: cover; }
  .section-title { color: #00745C; font-weight: 700; }
  .chip { display: inline-block; padding: .25rem .5rem; border-radius: 999px; background: #e7f6f2; font-size: .8rem; margin-right: .25rem; margin-bottom: .25rem; }
</style>
</head>
<body>
  <div class="container py-4 col-lg-8 col-md-10 col-sm-12 box">
    <div class="text-center">
      <img src="https://raw.githubusercontent.com/Edmils0nJr/DEVELOPMENTS/main/css/logo.png" class="img-fluid mb-3" style="max-width: 220px;" alt="Logo InvestVerde" />
      <h2 class="fw-bold">Potenciais Investidores</h2>
    </div>

    <div class="d-flex justify-content-between align-items-center mt-4 mb-2">
      <div class="input-group">
        <input type="text" id="busca" class="form-control" placeholder="Buscar investidor..." />
        <button class="btn btn-outline-secondary" type="button" id="btnBuscar">
          <img src="https://cdn-icons-png.flaticon.com/512/622/622669.png" alt="Buscar" style="width: 20px;" />
        </button>
      </div>
      <button id="btnFiltroODS" class="btn btn-link text-decoration-none ms-2">Filtrar investidor</button>
    </div>

    <div id="filtros" class="mb-3" style="display:none;">
      <div class="card card-body">
        <div class="row g-2 align-items-center">
          <div class="col-sm-6">
            <label class="form-label mb-1">ODS (selecione até 3)</label>
            <select id="filtroOds" class="form-select" multiple>
              <option value="1">ODS 1</option>
<option value="2">ODS 2</option>
<option value="3">ODS 3</option>
<option value="4">ODS 4</option>
<option value="5">ODS 5</option>
<option value="6">ODS 6</option>
<option value="7">ODS 7</option>
<option value="8">ODS 8</option>
<option value="9">ODS 9</option>
<option value="10">ODS 10</option>
<option value="11">ODS 11</option>
<option value="12">ODS 12</option>
<option value="13">ODS 13</option>
<option value="14">ODS 14</option>
<option value="15">ODS 15</option>
<option value="16">ODS 16</option>
<option value="17">ODS 17</option>
            </select>
          </div>
          <div class="col-sm-6">
            <label class="form-label mb-1">Área de interesse</label>
            <select id="filtroArea" class="form-select">
              <option value="">Todas</option>
              <option>Energia renovável</option>
              <option>Agricultura sustentável</option>
              <option>Gestão de água</option>
              <option>Tratamento de resíduos</option>
              <option>Conservação de biodiversidade</option>
            </select>
          </div>
        </div>
        <div class="text-end mt-2">
          <button id="btnLimpar" class="btn btn-outline-secondary btn-sm">Limpar</button>
          <button id="btnAplicar" class="btn btn-custom btn-sm">Aplicar</button>
        </div>
      </div>
    </div>

    <div id="listaInvestidores" class="vstack gap-3"></div>

    <footer>
      <div class="menu d-flex justify-content-around">
        <a href="homeEmpreendedor.html" class="text-center text-decoration-none text-muted">
          <img src="https://cdn-icons-png.flaticon.com/512/1946/1946436.png" class="icone-menu" alt="Início" />
          <div>Início</div>
        </a>
        <a href="catalogo_empreendedor.html" class="text-center text-decoration-none text-muted">
          <img src="https://raw.githubusercontent.com/Edmils0nJr/DEVELOPMENTS/main/css/folha.png" class="icone-menu" alt="Projetos" />
          <div>Projetos</div>
        </a>
        <a href="catalogo_investidores.html" class="text-center text-decoration-none text-muted">
          <i class="bi bi-people-fill icone-menu"></i>
          <div>Investidores</div>
        </a>
        <a href="perfil_empreendedor.html" class="text-center text-decoration-none text-muted">
          <img src="https://cdn-icons-png.flaticon.com/512/1077/1077012.png" class="icone-menu" alt="Perfil" />
          <div>Perfil</div>
        </a>
      </div>
    </footer>
  </div>

  <script>
    const dados = [
      { id: 1, nome: "Prefeitura Municipal de VerdeVivo", img: "https://images.unsplash.com/photo-1486304873000-235643847519?q=80&w=800&auto=format&fit=crop", 
        desc: "Buscar e apoiar projetos inovadores que promovam soluções sustentáveis para os desafios urbanos, como gestão de resíduos, mobilidade e educação ambiental, aproximando o poder público da sociedade civil e acadêmica.",
        ods: [11,12,13], areas:["Tratamento de resíduos","Gestão de água"] },
      { id: 2, nome: "Banco Terra Fértil S.A.", img: "imagens/terra_fertil.jfif", 
        desc: "Investir em ideias sustentáveis e tecnologias verdes que promovam o desenvolvimento econômico aliado à preservação ambiental, incentivando o empreendedorismo com impacto positivo.",
        ods: [8,9,13], areas:["Energia renovável","Indústria verde"] },
      { id: 3, nome: "ONG Nova Semente", img: "imagens/ong.png",
        desc: "Apoiar causas socioambientais por meio da identificação e parceria com projetos que envolvam comunidades locais em ações de reflorestamento, reciclagem, educação e inclusão social.",
        ods: [10,12,15], areas:["Conservação de biodiversidade","Tratamento de resíduos"] },
      { id: 4, nome: "Agência Nacional de Inovação Sustentável (ANIS)", img: "imagens/ans.jfif",
        desc: "Fomentar políticas públicas baseadas em soluções tecnológicas sustentáveis, estimulando a colaboração entre governos, universidades, empresas e sociedade civil para acelerar a transição ecológica do país.",
        ods: [4,7,17], areas:["Energia renovável","Educação"] }
    ];

    const lista = document.getElementById("listaInvestidores");
    const campoBusca = document.getElementById("busca");
    const btnBuscar = document.getElementById("btnBuscar");
    const btnFiltroODS = document.getElementById("btnFiltroODS");
    const filtros = document.getElementById("filtros");
    const filtroOds = document.getElementById("filtroOds");
    const filtroArea = document.getElementById("filtroArea");
    const btnAplicar = document.getElementById("btnAplicar");
    const btnLimpar = document.getElementById("btnLimpar");

    async function carregarInvestidores() {
      try {
        const res = await fetch("https://9tn2xd-3001.csb.app/api/investidores/");
        const listaI = await res.json();
        if (!res.ok) throw new Error();
        render(listaI);
        //console.log(listaI)
      } catch (err) {
        lista.innerHTML = "<p class='text-danger'>Erro ao carregar investidores.</p>";
        console.error(err);
      }
    }

    carregarInvestidores()

    function render(items) {{ 
      lista.innerHTML = "";
      if (items.length === 0) {{ 
        lista.innerHTML = "<p class='text-center'>Nenhum investidor encontrado.</p>"; 
        return; 
      }}
      items.forEach(i => {{
        const card = document.createElement("div");
        card.className = "card card-item shadow-sm";
        card.innerHTML = `
          <div class="card-body d-flex gap-3">
            <img src="${i.img}" alt="" class="rounded-circle" style="width:64px;height:64px;object-fit:cover;">
            <div class="flex-grow-1">
              <h5 class="mb-1">${i.nome}</h5>
              <p class="mb-2">${i.desc}</p>
              <div class="mb-2"><strong>ODS que pretende alcançar:</strong><br>
                ${i.ods.map(o => `<span class="chip">ODS ${o}</span>`).join(" ")}
              </div>
            </div>
          </div>
        `;
        lista.appendChild(card);
      }});
    }}

    function aplicarFiltroTexto(items, texto) {{
      const t = texto.trim().toLowerCase();
      if (!t) return items;
      return items.filter(i => i.nome.toLowerCase().includes(t) || i.desc.toLowerCase().includes(t));
    }}

    function aplicarFiltrosAvancados(items) {{
      const odsSel = Array.from(filtroOds.selectedOptions).map(o => Number(o.value));
      const areaSel = filtroArea.value;
      return items.filter(i => {{
        const okOds = odsSel.length ? odsSel.every(o => i.ods.includes(o)) : true;
        const okArea = areaSel ? (i.areas || []).includes(areaSel) : true;
        return okOds && okArea;
      }});
    }}

    function atualizar() {{
      const base = aplicarFiltroTexto(dados, campoBusca.value);
      const filtrado = aplicarFiltrosAvancados(base);
      render(filtrado);
    }}

    btnBuscar.addEventListener("click", atualizar);
    campoBusca.addEventListener("keypress", e => {{ if (e.key === "Enter") atualizar(); }});
    btnFiltroODS.addEventListener("click", () => filtros.style.display = filtros.style.display === "none" ? "block" : "none");
    btnAplicar.addEventListener("click", atualizar);
    btnLimpar.addEventListener("click", () => {{ filtroOds.selectedIndex = -1; filtroArea.value=""; atualizar(); }});


    //render(dados);
  </script>
</body>
</html>
